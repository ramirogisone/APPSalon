{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","seleccionarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","validarFecha","validarHora","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","ev","preventDefault","parseInt","target","dataset","seccion","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","servicioObj","siguiente","anterior","resumenDiv","firstChild","removeChild","Object","values","includes","mjeError","headingCita","innerHTML","horaCita","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","Date","getUTCDay","fechaHoy","anio","getFullYear","mes","getMonth","dia","getDate","fechaValidar","min","horaInput"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\n\nconst cita = {\n\tnombre: '',\n\tfecha: '',\n\thora: '',\n\tservicios: []\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\tiniciarApp();\n});\n\nfunction iniciarApp() {\n\tmostrarServicios();\n\n\t// resaltar el tab seleccionado\n\tmostrarSeccion();\n\n\t// mostrar u ocultar seccion de acuerdo al tab seleccionado\n\tseleccionarSeccion();\n\n\tpaginaSiguiente();\n\n\tpaginaAnterior();\n\n\t// muestra u oculta la paginacion\n\tbotonesPaginador();\n\n\t//  Mostrar resumen de cita o error si no pasa la validacion\n\tmostrarResumen();\n\n\tnombreCita();\n\n\tfechaCita();\n\n\t// validar que la fecha no este en el pasado\n\tvalidarFecha();\n\n\t// validamos la hora\n\tvalidarHora();\n}\n\nfunction mostrarSeccion() {\n\n\tconst seccionAnterior = document.querySelector('.mostrar-seccion');\n\n\t// elimina la clase '.mostrar-seccion' de la seccion anterior\n\tif (seccionAnterior) {\n\t\tseccionAnterior.classList.remove('mostrar-seccion');\n\t}\n\t\n\tconst seccionActual = document.querySelector(`#seccion-${pagina}`);\n\tseccionActual.classList.add('mostrar-seccion');\n\n\tconst tabAnterior = document.querySelector('.tabs .actual');\n\t// eliminar la clase actual en el tab anterior\n\tif (tabAnterior) {\n\t\ttabAnterior.classList.remove('actual');\n\t}\n\t\n\t// resaltar tab actual\n\tconst tab = document.querySelector(`[data-seccion=\"${pagina}\"]`);\n\ttab.classList.add('actual');\n\t\n}\n\nfunction seleccionarSeccion() {\n\tconst enlaces = document.querySelectorAll('.tabs button');\n\n\tenlaces.forEach( enlace => {\n\t\tenlace.addEventListener('click', ev => {\n\t\t\tev.preventDefault();\n\n\t\t\tpagina = parseInt(ev.target.dataset.seccion);\n\n\t\t\tmostrarSeccion();\n\n\t\t\tbotonesPaginador();\n\t\t})\n\t})\n}\n\nasync function mostrarServicios() {\n\ttry {\n\t\tconst resultado = await fetch('./servicios.json');\n\t\tconst db = await resultado.json();\n\n\t\tconst { servicios } = db;\n\n\t\tservicios.forEach(servicio => {\n\t\t\tconst { id, nombre, precio } = servicio;\n\n\t\t\t\t//  DOM Scripting\n\t\t\tconst nombreServicio = document.createElement('P');\n\t\t\tnombreServicio.textContent = nombre;\n\t\t\tnombreServicio.classList.add('nombre-servicio');\n\n\t\t\tconst precioServicio = document.createElement('P');\n\t\t\tprecioServicio.textContent = `$ ${precio}`;\n\t\t\tprecioServicio.classList.add('precio-servicio');\n\n\t\t\tconst servicioDiv = document.createElement('DIV');\n\t\t\tservicioDiv.classList.add('servicio');\n\t\t\tservicioDiv.dataset.idServicio = id;\n\n\t\t\tservicioDiv.onclick = seleccionarServicio;\n\n\t\t\t// agregar nombre y precio al div de servicio\n\t\t\tservicioDiv.appendChild(nombreServicio);\n\t\t\tservicioDiv.appendChild(precioServicio);\n\n\t\t\t// inyectar en el HTML\n\t\t\tdocument.querySelector('#servicios').appendChild(servicioDiv);\n\t\t});\n\n\t} catch (error) {\n\t\tconsole.log(error);\n\t}\n}\n\nfunction seleccionarServicio(ev) {\n\n\tlet elemento;\n\n\tif (ev.target.tagName === 'P') {\n\t\telemento = ev.target.parentElement;\n\t} else {\n\t\telemento = ev.target;\n\t}\n\n\tif (elemento.classList.contains('seleccionado')) {\n\t\telemento.classList.remove('seleccionado');\n\n\t\tconst id = parseInt(elemento.dataset.idServicio);\n\t\t\n\t\teliminarServicio(id); \n\t} else {\n\t\telemento.classList.add('seleccionado');\n\n\t\tconst servicioObj = {\n\t\t\tid: parseInt(elemento.dataset.idServicio),\n\t\t\tnombre: elemento.firstElementChild.textContent,\n\t\t\tprecio: elemento.firstElementChild.nextElementSibling.textContent\n\t\t} \n\n\t\t// console.log(servicioObj);\n\t\tagregarServicio(servicioObj);\n\t}\n}\n\nfunction eliminarServicio(id) {\n\tconst { servicios } = cita;\n\n\tcita.servicios = servicios.filter( servicio => servicio.id != id );\n\n\tconsole.log(cita);\n}\n\nfunction agregarServicio(servicioObj) {\n\t\n\tconst { servicios } = cita;\n\n\tcita.servicios = [...servicios, servicioObj];\n\n\tconsole.log(cita);\n}\n\nfunction paginaSiguiente() {\n\t\n\tconst siguiente = document.querySelector('#siguiente');\n\tsiguiente.addEventListener('click', () => {\n\t\tpagina++;\n\t\tbotonesPaginador();\n\t})\n}\n\nfunction paginaAnterior() {\n\tconst anterior = document.querySelector('#anterior');\n\tanterior.addEventListener('click', () => {\n\t\tpagina--;\n\t\tbotonesPaginador();\n\t})\n}\n\nfunction botonesPaginador() {\n\tconst siguiente = document.querySelector('#siguiente');\n\tconst anterior = document.querySelector('#anterior');\n\n\tif (pagina === 1 ) {\n\t\tanterior.classList.add('ocultar');\n\t\tsiguiente.classList.remove('ocultar');\n\t}else if (pagina === 3) {\n\t\tsiguiente.classList.add('ocultar');\n\t\tanterior.classList.remove('ocultar');\n\n\t\tmostrarResumen(); // llamamos a la funcion cuando estamos en la pagina 3\n\t} else {\n\t\tanterior.classList.remove('ocultar');\n\t\tsiguiente.classList.remove('ocultar');\n\t}\n\n\tmostrarSeccion();\n}\n\nfunction mostrarResumen() {\n\n\tconst { nombre, fecha, hora, servicios } = cita;\n\n\tconst resumenDiv = document.querySelector('.contenido-resumen');\n\n\t// limpiar html previo\n\twhile (resumenDiv.firstChild) {\n\t\tresumenDiv.removeChild(resumenDiv.firstChild);\n\t}\n\n\tif (Object.values(cita).includes('')) {\n\t\tconst mjeError = document.createElement('P');\n\t\tmjeError.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\n\t\tmjeError.classList.add('invalidar-cita');\n\t\tresumenDiv.appendChild(mjeError);\n\t\n\t\treturn;\n\t}\n\n\tconst headingCita = document.createElement('H3');\n\theadingCita.textContent = 'Resumen de cita';\n\n\t// muestro el resumen\n\tconst nombreCita = document.createElement('P');\n\tnombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\n\n\tconst fechaCita = document.createElement('P');\n\tfechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\n\n\tconst horaCita = document.createElement('P');\n\thoraCita.innerHTML = `<span>Hora:</span> ${hora}`;\n\n\tconst serviciosCita = document.createElement('DIV');\n\tserviciosCita.classList.add('resumen-servicios');\n\n\tconst headingServicios = document.createElement('H3');\n\theadingServicios.textContent = 'Resumen de servicios';\n\n\tserviciosCita.appendChild(headingServicios);\n\n\tlet cantidad = 0;\n\n\n\t// iterar sobre el arreglo de servicios\n\tservicios.forEach( servicio => {\n\n\t\tconst {nombre, precio} = servicio;\n\n\t\tconst contenedorServicio = document.createElement('DIV');\n\t\tcontenedorServicio.classList.add('contenedor-servicio');\n\n\t\tconst textoServicio = document.createElement('P');\n\t\ttextoServicio.textContent = nombre;\n\n\t\tconst precioServicio = document.createElement('P');\n\t\tprecioServicio.textContent = precio;\n\t\tprecioServicio.classList.add('precio');\n\n\t\tconst totalServicio = precio.split('$');\n\t\t\n\t\tcantidad += parseInt( totalServicio[1].trim() );\n\n\t\tcontenedorServicio.appendChild(textoServicio);\n\t\tcontenedorServicio.appendChild(precioServicio);\n\n\t\tserviciosCita.appendChild(contenedorServicio);\n\t});\n\n\tconsole.log(cantidad);\n\t\n\tresumenDiv.appendChild(headingCita);\n\tresumenDiv.appendChild(nombreCita);\n\tresumenDiv.appendChild(fechaCita);\n\tresumenDiv.appendChild(horaCita);\n\tresumenDiv.appendChild(serviciosCita);\n\t\n\tconst cantidadPagar = document.createElement('P');\n\tcantidadPagar.classList.add('total');\n\tcantidadPagar.innerHTML = `<span>Total a pagar: </span>$ ${cantidad}`;\n\n\tresumenDiv.appendChild(cantidadPagar);\n\t\n}\n\nfunction nombreCita() {\n\tconst nombreInput = document.querySelector('#nombre');\n\n\tnombreInput.addEventListener('input', ev => {\n\t\tconst nombreTexto = ev.target.value.trim();\n\n\t\tif (nombreTexto === '' || nombreTexto.length < 3) {\n\t\t\tmostrarAlerta('El campo no puesde estar vacio', 'error');\n\t\t} else {\n\t\t\tconst alerta = document.querySelector('.alerta');\n\t\t\tif (alerta) {\n\t\t\t\talerta.remove();\n\t\t\t}\n\t\t\tcita.nombre = nombreTexto;\n\t\t\tconsole.log(cita);\n\t\t}\n\t})\n}\n\nfunction mostrarAlerta(mensaje, tipo) {\n\n\tconst alertaPrevia = document.querySelector('.alerta');\n\t\n\tif (alertaPrevia) {\n\t\treturn;\n\t}\n\t\n\tconst alerta = document.createElement('div');\n\talerta.textContent = mensaje;\n\talerta.classList.add('alerta');\n\n\tif (tipo === 'error') {\n\t\talerta.classList.add('error');\n\t}\n\n\tconst formulario = document.querySelector('.formulario');\n\tformulario.appendChild(alerta);\n\n\tsetTimeout(() => {\n\t\talerta.remove();\n\t}, 3000);\n}\n\nfunction fechaCita() {\n\tconst fechaInput = document.querySelector('#fecha');\n\tfechaInput.addEventListener('input', ev => {\n\t\t\n\t\tconst fecha = new Date(ev.target.value).getUTCDay();\n\n\t\tif ([0, 6].includes(fecha)) {\n\t\t\tev.preventDefault();\n\t\t\tfechaInput.value = '';\n\t\t\tmostrarAlerta('Los fines de semana se descansa :)', 'error');\n\t\t} else {\n\t\t\tcita.fecha = fechaInput.value;\n\t\t}\n\n\t\t// console.log(cita);\n\t})\n}\n\nfunction validarFecha() {\n\tconst fechaInput = document.querySelector('#fecha');\n\t\n\tconst fechaHoy = new Date();\n\tconst anio = fechaHoy.getFullYear();\n\tlet mes = fechaHoy.getMonth() + 1;\n\n\tif (mes < 10) {\n\t\tmes = `0${mes}`;\n\t}\n\t\n\tlet dia = fechaHoy.getDate();\n\n\tif (dia < 10) {\n\t\tdia = `0${dia}`;\n\t}\n\t\n\tconst fechaValidar = `${anio}-${mes}-${dia}`;\n\n\tfechaInput.min = fechaValidar;\n}\n\nfunction validarHora() {\n\tconst horaInput = document.querySelector(\"#hora\");\n\thoraInput.addEventListener ('input', ev => {\n\n\t\tconst horaCita = ev.target.value;\n\t\tconst hora = horaCita.split(':');\n\n\t\tif (hora[0] < 9  || hora[0] > 18) {\n\t\t\tmostrarAlerta('Fuera del horario de atencion', 'error');\n\t\t\tsetTimeout(() => {\n\t\t\t\thoraInput.value = '';\n\t\t\t}, 3000);\n\t\t} else {\n\t\t\tcita.hora = horaCita;\n\t\t}\n\t})\n\t\n}"]}